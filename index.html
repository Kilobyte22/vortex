<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>The Vortex scripting language</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <meta name="Author" content="q66"/>
    <meta name="Copyright" content="Copyright (C) 2012 q66"/>
    <meta name="Language" content="en"/>
    <link rel="stylesheet" type="text/css" href="vortex.css"/>
    <script type="text/javascript" src="vortex.js"></script>
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
        function toggle(id) {
           var nd = document.getElementById(id);
           if (nd.style.display == 'block') {
               nd.style.display = 'none';
           } else {
               nd.style.display = 'block';
           }
        }
    </script>
</head>
<body onload="prettify_all();">
    <div id="logo">
        <a href="http://quaker66.github.com/vortex/">Vortex</a>
    </div>
    <div id="menu">
        <ul>
            <li><a href="#top">Home</a><span class="arrow">&raquo;</span></li>
            <li><a href="#news">News</a><span class="arrow">&raquo;</span></li>
            <li><a href="#about">About</a><span class="arrow">&raquo;</span></li>
            <li><a href="#install">Installation</a><span class="arrow">&raquo;</span></li>
            <li><a href="#faq">FAQ</a><span class="arrow">&raquo;</span></li>
            <li><span class="fakebtn" onclick="toggle('repl')">REPL</span><span class="arrow">&raquo;</span></li>
            <li><a href="https://github.com/quaker66/vortex/blob/master/docs/tutorial.md">Tutorial</a><span class="arrow">&raquo;</span></li>
            <li><a href="https://github.com/quaker66/vortex/blob/master/docs/language_reference.md">Documentation</a><span class="arrow">&raquo;</span></li>
            <li><a href="https://github.com/quaker66/vortex/wiki">Wiki</a><span class="arrow">&raquo;</span></li>
            <li><a href="https://github.com/quaker66/vortex/issues">Issues</a><span class="arrow">&raquo;</span></li>
        </ul>
        <br/>
        <div style="float: left; margin-left: 1em;"><g:plusone></g:plusone></div>
    </div>
    <div id="main">
        <a href="https://github.com/quaker66/vortex">
            <img style="position: fixed; top: 0; right: 0; border: 0;"
                 src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
                 alt="Fork me on GitHub"/>
        </a>
        <h1>Vortex is a scripting language that compiles to Lua.</h1>
        <div class="box">
            <p>It aims to provide a comfortable, modern scripting language that
            follows both Lua and "batteries included" philosophies. Note: <span class="note">Vortex is not stable at this point
            and many of the features are incomplete/missing/undecided on.</span></p>
            <p>The IRC channel: #vortex-lang @ irc.freenode.net</p>
            <h3>First, a small taste of the language.</h3>
            <pre class="code">/* sample output:
 * [ 82, 53, 62, 67, 47, 63, 47, 7, 49, 59, 74, 97, 32, 65, 8 ]
 * [ 7, 8, 32, 47, 47, 49, 53, 59, 62, 63, 65, 67, 74, 82, 97 ]
 */

math.randomseed(os.time())
fn filter(l, f) -> [ seq -> for i, v in ipairs(l) -> if f(v) -> yield v ]

fn rec qsort(l) ->
    | [] -> []
    | x :: xs -> qsort(filter(xs, fn v -> v <  x))
       ++ [x] ++ qsort(filter(xs, fn v -> v >= x))

let t1 = [ seq -> for i = 1 .. 15 -> yield math.random(1, 99) ]
print(e"[ $(tconc(t1, ', ')) ]\n[ $(tconc(qsort(t1), ', ')) ]")</pre>
            <h3>Vortex is convenient.</h3>
            <p>It includes syntax inspired by languages such as Lua, Scheme,
            Rust, OCaml and F#. Staying true to its roots, it provides
            facilities for semantic extension and adds its own for the syntax
            as well. It's multi-paradigm, providing builtin support for several
            programming styles by default, primarily functional.</p>
            <p>It's a fully expression based language, having no statements. There
            are multiple expressions that are, however, mostly used as statements
            and do not work like expressions in the traditional form (such as
            goto).</p>
            <h3>Vortex is powerful.</h3>
            <p>In addition to Lua, Vortex provides many additional features,
            including:</p><ul>
                <li>Everything is an expression [done]</li>
                <li>Function arguments with default values [done]</li>
                <li>Blocks are expressions [done]</li>
                <li>Builtin syntax for coroutines and generators [not yet]</li>
                <li>Pattern matching [done]</li>
                <li>Sequences [done]</li>
                <li>Hygienic macros [not yet]</li>
                <li>Additional table operations (join, slice) [join]</li>
                <li>Lists [partial]</li>
                <li>Destructuring let [done]</li>
                <li>Differential prototypes with multiple inheritance [done]</li>
                <li>String interpolation [done]</li>
                <li>Redesigned string literals [done]</li>
                <li>Named varargs [done]</li>
                <li>and more.</li>
            </ul>
            <h3>Vortex is fast.</h3>
            <p>It outputs nice, pretty-printed Lua code that is as fast as its
            handwritten equivalents, particularly with LuaJIT, which is also
            the primary environment Vortex is supposed to be used in.</p>
            <h3>Vortex is compatible.</h3>
            <p>The output is fully compatible with Lua 5.2 and LuaJIT. Lua 5.1
            compatibility is not guaranteed and some code might not work (the
            output uses extensions such as goto and the bit library).</p>
            <h3>Want more?</h3>
            <p>Try it out! And feel free to look around for examples.</p>
        </div>
        <br class="sep"/>
        <div class="box">
            <h2><a name="news"></a>News</h2>
            <dl>
                <dt><sup>January 19 2013</sup>More updates</dt>
                <dd>New features, new examples, updated website text. Check
                out git logs for more information.</dd>
                <dt><sup>November 8 2012</sup>Updates</dt>
                <dd>Implemented lots of features, like pattern matching,
                objects, proper loops and so on. All examples on this
                page work now. Preparing online REPL. 0.1 coming soon.</dd>
                <dt><sup>October 28 2012</sup>Initial website launch</dt>
                <dd>I launched this website. It's incomplete at this point,
                but eventually more content will appear.</dd>
            </dl>
        </div>
        <br class="sep"/>
        <div class="box">
            <h2><a name="about"></a>About Vortex</h2>
            <p>Vortex was created by Daniel "q66" Kolesa as an attempt to
            create a language that uses Lua as an intermediate step. It tries
            to keep the best from Lua while eliminating the noise and
            verbosities and adding new useful features.</p>
            <p>Instead of using a limited indent-based syntax, Vortex stays
            with a free form one where whitespace is insignificant, allowing
            for custom formatting of the source code, but at the same time
            attempts to make  it as clean as possible. Here you can see some
            of the features Vortex has.</p>
            <pre class="code">/* tail recursive, pattern matched factorial
   /* long comments can be nested */
 */
fn rec fact(n, acc = 1) ->
    | 0 -> acc
    | _ -> fact(n - 1, n * acc)

// sequences
let (a, b, c) = seq -> for k, v in pairs([ 5, 10, 15 ]) -> yield v
assert(a == 5 and b == 10 and c == 15)

// sequences as list comprehensions
fn fun(args...) ->
    [ seq -> for k, v in pairs(args) -> yield v * 2 ]
assert(fun(1, 2, 3)[3] == 6)

// hybrid prototype/class object system with multiple differential inheritance
// if you're inheriting from Object, you don't specify it
let Foo = clone ->
    fn __init(x) -> @x = x
    fn boo() -> print("boo!", @x)
end

let Bar = clone ->
   fn baa() -> print("baa!", @x)
end

let Baz = clone (Foo, Bar) ->
    fn boo() do
        print("new boo!")
        Foo.boo(self)
    end
end

let inst = new Baz(5)
inst:boo()
inst:baa()</pre>
            <pre class="code">/* A more realistic quicksort example
 * median of 3 pivot, insertion sort for small chunks
 */

fn partition(lst, l, r, p, fun) -> with pivot = lst[p] do
    set (lst[p], lst[r]) = (lst[r], lst[p])
    for i = l .. r - 1 -> if fun(lst[i], pivot) do
        set (lst[i], lst[l]) = (lst[l], lst[i])
        l += 1
    end
    set (lst[l], lst[r]) = (lst[r], lst[l])
    return l
end

fn insort(lst, l = 1, r = #lst, f = fn a, b -> a < b) -> for i = l .. r ->
    with (j, v) = (i, lst[i]) do
        loop while j > 1 and not f(lst[j - 1], v) do
            lst[j] = lst[j - 1]
            j -= 1
        end
        lst[j] = v
    end

fn rec qsort(lst, l = 1, r = #lst, f = fn a, b -> a < b) -> if (r - l) > 10 ->
    with pi = partition(lst, l, r, floor((l + r) / 2), f) do
        qsort(lst, l, pi - 1, f)
        qsort(lst, pi + 1, r, f)
    end
else insort(lst, l, r, f)

let t1 = [ 5, 10, 36, 24, 18, 7, 1, 3, 13, 27, 84 ]
print(e"[ $(tconc(t1, ', ')) ]")
qsort(t1)
print(e"[ $(tconc(t1, ', ')) ]")</pre>
        </div>
        <br class="sep"/>
        <div class="box">
            <h2><a name="install"></a>Installation</h2>
            <p>At this point, you'll have to clone the <a href="http://github.com/quaker66/vortex">Git repository</a>
            and run things manually. You'll need LuaJIT or Lua 5.2. Regular Lua 5.1 will not work.</p>
            <p>In the future, I might provide some automated system based on LuaRocks or something.</p>
        </div>
        <br class="sep"/>
        <div class="box">
            <h2><a name="faq"></a>Vortex FAQ</h2>
            <dl>
                <dt>Why Vortex?</dt>
                <dd>Because the language is always in a whirl. :) The name will stay when the language is stable though.</dd>
                <dt>How about editor support?</dt>
                <dd>At this point, there is jEdit syntax file included in the repository. Vim support is coming soon and others possibly too.</dd>
                <dt>Why a new language?</dt>
                <dd>I worked with many languages and so far I haven't found any that shared all the goals with Vortex.</dd>
                <dt>Where can I find more information, example code, list of differences etc.?</dt>
                <dd>The <a href="https://github.com/quaker66/vortex/wiki">wiki</a> is the place you want.</dd>
            </dl>
        </div>
        <br class="sep"/>
    </div>
    <div id="repl" style="display: none">
        <div id="repl_input_div">
            <textarea id="repl_edit" spellcheck="false">A Vortex online REPL</textarea>
        </div>
        <div id="repl_output_div">
            <pre id="repl_out">Coming soon</pre>
        </div>
    </div>
    <div id="footer">
        Vortex is provided under the terms of the MIT license &middot; Copyright 2012 Daniel "q66" Kolesa
    </div>
</body>
</html>
